<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>é‡‘é¸¿é›†å›¢è´¦å•</title>
<style>
body {
    background:#f5f7fb;
    font-family: Arial;
}
.box {
    width: 1100px;
    margin: 50px auto;
    background:#fff;
    padding:30px;
    border-radius:10px;
}
h1 {
    margin-bottom:20px;
}
button {
    padding:8px 16px;
}
table {
    width:100%;
    border-collapse: collapse;
    margin-top:20px;
}
th, td {
    border-bottom:1px solid #eee;
    padding:8px;
    text-align:center;
}
</style>
</head>
<body>

<div class="box">
    <h1>ğŸ“’ é‡‘é¸¿é›†å›¢è´¦å•</h1>

    <button onclick="loadData()">åˆ·æ–°è´¦å•</button>

    <table>
        <thead>
            <tr>
                <th>æ—¶é—´</th>
                <th>CNY</th>
                <th>æ±‡ç‡</th>
                <th>USDT</th>
                <th>äººå‘˜</th>
            </tr>
        </thead>
        <tbody id="tbody">
            <tr><td colspan="5">åŠ è½½ä¸­...</td></tr>
        </tbody>
    </table>
</div>

<script>
function loadData(){
    fetch("/api/records")
        .then(res => res.json())
        .then(data => {
            const tbody = document.getElementById("tbody");
            tbody.innerHTML = "";

            if(data.records.length === 0){
                tbody.innerHTML = "<tr><td colspan='5'>æš‚æ— æ•°æ®</td></tr>";
                return;
            }

            data.records.forEach(r => {
                const tr = document.createElement("tr");
                tr.innerHTML = `
                    <td>${r.ts}</td>
                    <td>${r.amount_cny}</td>
                    <td>${r.rate || "-"}</td>
                    <td>${r.amount_usdt.toFixed(2)}</td>
                    <td>${r.who}</td>
                `;
                tbody.appendChild(tr);
            });
        });
}

loadData();
</script>

</body>
</html>
